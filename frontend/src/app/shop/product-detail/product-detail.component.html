<div class="product-detail-page">
  <div class="product-detail-container" *ngIf="product">
    <div class="product-layout">
      <!-- Left Column: Image -->
      <div class="product-image-section">
        <mat-card class="image-card">
          <img [src]="product.imageUrl || 'https://via.placeholder.com/600x600?text=No+Image+Available'" [alt]="product.name" class="product-image">
          <div class="tag" *ngIf="product.stock > 0">Handcrafted in Michigan</div>
          <div class="tag out-of-stock" *ngIf="product.stock === 0">Currently Unavailable</div>
        </mat-card>
      </div>

      <!-- Right Column: Details -->
      <div class="product-info-section">
        <div class="breadcrumb">
          <a routerLink="/">Home</a> / <span>{{ product.name }}</span>
        </div>
        
        <h1 class="product-title">{{ product.name }}</h1>
        <div class="price-tag">{{ product.price | currency }}</div>
        
        <div class="stock-status" [class.low-stock]="product.stock > 0 && product.stock < 5">
          <mat-icon>{{ product.stock > 0 ? 'check_circle' : 'error' }}</mat-icon>
          <span>{{ product.stock > 0 ? (product.stock + ' pieces available') : 'Out of Stock' }}</span>
        </div>

        <div class="divider"></div>

        <div class="description-box">
          <h3>The Craftsmanship</h3>
          <p>{{ product.description }}</p>
        </div>

        <div class="action-buttons">
          <button mat-raised-button color="primary" class="add-to-cart-btn" (click)="addToCart()" [disabled]="product.stock === 0">
            <mat-icon>shopping_cart</mat-icon>
            Add to Collection
          </button>
          <button mat-stroked-button color="accent" class="ask-btn" [routerLink]="['/shop/product', product.id, 'ask']">
            <mat-icon>question_answer</mat-icon>
            Inquire About This Piece
          </button>
        </div>

        <div class="trust-badges">
          <div class="badge">
            <mat-icon>eco</mat-icon>
            <span>Sustainable Wood</span>
          </div>
          <div class="badge">
            <mat-icon>local_shipping</mat-icon>
            <span>Careful Packaging</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Questions Section -->
    <div class="questions-section">
      <mat-card class="questions-card">
        <mat-card-header>
          <mat-card-title>Collector Q&A</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <app-question-list [productId]="product.id"></app-question-list>
        </mat-card-content>
      </mat-card>
    </div>
  </div>

  <div *ngIf="!product" class="loading-container">
    <mat-spinner diameter="50"></mat-spinner>
    <p>Loading your artisanal piece...</p>
  </div>
</div>
